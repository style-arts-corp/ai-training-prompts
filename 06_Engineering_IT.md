# 06. エンジニアリング・技術（Engineering & IT）

このファイルでは、要件定義から実装、コードレビュー、技術選定まで、開発プロセス全体を支援するプロンプトをまとめています。
「シニアエンジニア」や「CTO」の役割をAIに与えることで、質の高い技術的アドバイスを引き出します。

---

## 1. 実装・コーディング（Coding）
仕様に基づいたコード生成や、既存コードの書き換えを行います。

### 💻 アルゴリズム実装と解説
特定の処理を行うコードを生成させます。

```text
あなたはPythonに精通したバックエンドエンジニアです。
以下の {要件} を満たすPythonコードを作成してください。

# 制約条件
- 型ヒント（Type Hints）を付与すること。
- 各関数にはGoogleスタイルのDocstringを記述すること。
- エラーハンドリング（例外処理）を適切に実装すること。

# 要件
- CSVファイルを読み込み、特定のカラム（"price"）の平均値を計算する。
- ファイルが存在しない場合や、データ不正時の処理を含める。
```

### 🔄 リファクタリング・言語移行
古いコードをモダンな書き方に修正したり、別の言語に書き換えたりします。

```text
あなたはフロントエンドのスペシャリストです。
以下の {レガシーコード} は古いJavaScriptで書かれています。
これをモダンなTypeScriptに書き換えてください。

# 修正方針
- `var` は使わず `const`/`let` を使用する。
- 適切な型定義（Interface/Type）を追加する。
- 可読性を高めるため、関数名や変数名をリファクタリングする。

# レガシーコード
function a(data) {
    var r = 0;
    for(var i=0; i<data.length; i++) {
        r += data[i].v;
    }
    return r;
}
```

---

## 2. 品質保証・レビュー（Review & QA）
コードの品質を高め、バグを未然に防ぎます。

### 🕵️‍♂️ コードレビュー（メンター視点）
書いたコードに対して、客観的な指摘をもらいます。

```text
あなたはGoogleのエンジニアリングガイドラインに精通したシニアエンジニアです。
私が書いた以下の {コード} をレビューしてください。

# レビュー項目
1. バグ・脆弱性：動作不良やセキュリティリスクはないか？
2. 可読性・保守性：変数の命名やロジックは分かりやすいか？
3. パフォーマンス：計算量が多すぎる処理はないか？

# 出力形式
- 良い点（Good）
- 改善点（Improvement）と修正案
- 修正を反映した「改善版コード」の全文

# コード
ITEM_LIST = [
    {"name": "りんご", "stock": 50, "unit_price": 120},
    {"name": "バナナ", "stock": 100, "unit_price": 80},
    {"name": "みかん", "stock": 30, "unit_price": 100}
]

def check_stock_and_price(itemName, count):
    # 特定の商品の在庫を確認し、合計価格を計算する
    found = False
    price = 0
    
    for item in ITEM_LIST:
        # この処理は非効率：リスト全体をチェックし続ける
        if item["name"] == itemName:
            found = True
            if item["stock"] >= count:
                price = item["unit_price"] * count
            else:
                price = 0 # 在庫不足時は価格を0に設定
    
    if found:
        return price
    else:
        # 商品が見つからなかった場合にNoneを返す
        return None
```

### 🧪 テストケース生成
実装漏れを防ぐためのテストケースを洗い出します。

```text
あなたはQA（品質保証）エンジニアです。
先ほどの {コード} に対して、単体テスト（Unit Test）を行うためのテストケースをリストアップしてください。

# 制約条件
- 正常系だけでなく、異常系（エラーケース）、境界値（Boundary Value）を網羅すること。
- Pythonの `unittest` または `pytest` で使える形式で出力すること。
```

---

## 3. 技術選定・アーキテクチャ（Architecture）
プロジェクトの要件に合った技術スタックや構成を検討します。

### 🏗️ 技術スタック選定
要件定義の段階で、最適な技術の組み合わせを相談します。

```text
私は現在、新規のマッチングアプリ開発を検討しているプロジェクトマネージャーです。
あなたは経験豊富なCTO（最高技術責任者）としてアドバイスをください。
以下の {要件} に基づき、最適な「技術スタック（言語、FW、インフラ）」の候補を2パターン提案してください。

# 要件
- ユーザー数：最大50万人想定
- 特性：リアルタイム性が重要（チャット機能あり）
- チーム状況：サーバーサイドの経験が浅いメンバーが多い
- 対応デバイス：iOS, Android, Web

# 出力形式
| 案 | フロントエンド | バックエンド | インフラ | 選定理由 | メリット | デメリット |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
```